<div class="pixel-border bg-[#2a2a2a] mt-3 p-4 space-y-4">
    <div class="flex items-center justify-between">
        <span class="font-pixel text-sm text-white">Garmin Connect</span>
        {% if garmin_connected %}
        <div class="flex space-x-2">
            <form method="post" action="{% url 'garminconnect:sync_garmin' %}" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="date_range" value="current_month"/>
                <button type="submit" class="pixel-button px-4 py-2 font-pixel text-xs text-cyan-300">SYNC</button>
            </form>
            <form method="post" action="{% url 'garminconnect:disconnect_garmin' %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="pixel-button px-4 py-2 font-pixel text-xs text-red-400">DISCONNECT</button>
            </form>
        </div>
        {% else %}
        <button id="garmin-connect-btn" class="pixel-button px-4 py-2 font-pixel text-xs text-cyan-300">CONNECT</button>
        {% endif %}
    </div>

    <div class="flex items-center justify-between">
        <span class="font-pixel text-sm text-white">Liftosaur</span>
        <button class="pixel-button px-4 py-2 font-pixel text-xs text-cyan-300">CONNECT</button>
    </div>
    <div class="flex items-center justify-between">
        <span class="font-pixel text-sm text-white">Health Connect</span>
        <a id="health-connect-btn" href="https://github.com/Flexingg/Flexingg-Sync/releases/download/latest/flexingg-sync.apk" download="flexingg-sync.apk" class="pixel-button px-4 py-2 font-pixel text-xs text-cyan-300">CONNECT</a>
    </div>
    <div class="flex items-center justify-between">
        <span class="font-pixel text-sm text-white">Apple Health</span>
        <button class="pixel-button px-4 py-2 font-pixel text-xs text-gray-500 opacity-50 cursor-not-allowed">COMING SOON</button>
    </div>
</div>

<!-- Modal only shown if not connected -->
{% if not garmin_connected %}
<div id="garmin-modal" class="fixed inset-0 bg-black hidden flex items-center justify-center z-50">
    <div class="bg-[#2a2a2a] p-6 rounded pixel-border w-96">
        <h3 class="font-pixel text-lg text-white mb-4">Connect Garmin Connect</h3>
        <p class="font-pixel text-sm text-gray-300 mb-4">We do not store your password, only the OAuth token.</p>
        <form method="post" action="{% url 'garminconnect:connect_garmin' %}" class="w-full h-full">
            {% csrf_token %}
            <div class="mb-4">
                <label class="font-pixel text-sm text-white block mb-1">Email</label>
                <input type="email" name="garmin_email" required class="pixel-input w-full" placeholder="your.email@garmin.com"/>
            </div>
            <div class="mb-4">
                <label class="font-pixel text-sm text-white block mb-1">Password</label>
                <input type="password" name="garmin_password" required class="pixel-input w-full" placeholder="Password"/>
            </div>
            <div class="flex justify-end space-x-2">
                <button type="button" onclick="toggleGarminModal()" class="pixel-button px-4 py-2 font-pixel text-xs text-gray-500">Cancel</button>
                <button type="submit" class="pixel-button px-4 py-2 font-pixel text-xs text-cyan-300">Connect</button>
            </div>
        </form>
    </div>
</div>
{% endif %}
