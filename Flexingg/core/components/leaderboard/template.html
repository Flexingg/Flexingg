<div class="space-y-4">
    <h3 class="font-pixel text-lg text-center text-blue-400">LEADERBOARD</h3>
    <div class="pixel-border bg-[#2a2a2a] mt-3 p-4">
        <div class="flex items-end justify-center gap-2 text-center h-56 mt-16">
            {% if users %}
                {% for user in users %}
                    {% if user.rank == 2 %}
                        <div class="w-1/3 flex flex-col items-center">
                            <img src="{% if user.avatar %}{{ user.avatar.url }}{% else %}https://placehold.co/64x64/222/cccccc?text={{ user.name.0|upper }}{% endif %}" alt="{{ user.name }} avatar" class="w-16 h-16 pixel-border mb-2" style="image-rendering: pixelated;">
                            <p class="font-pixel text-sm text-gray-300">{{ user.name }}</p>
                            <p class="text-xs text-yellow-400">{{ user.metric_value|floatformat:0 }} {{ metric|title }}</p>
                            <div class="h-24 mt-2 w-full bg-[#3a3a3a] pixel-border-light border-gray-400 flex items-center justify-center">
                                <p class="font-pixel text-4xl text-gray-300">2</p>
                            </div>
                        </div>
                    {% elif user.rank == 1 %}
                        <div class="w-1/3 flex flex-col items-center">
                            <img src="{% if user.avatar %}{{ user.avatar.url }}{% else %}https://placehold.co/64x64/222/eeeeee?text={{ user.name.0|upper }}{% endif %}" alt="{{ user.name }} avatar" class="w-20 h-20 pixel-border mb-2" style="image-rendering: pixelated;">
                            <p class="font-pixel text-base text-yellow-300">{{ user.name }}</p>
                            <p class="text-sm text-yellow-300">{{ user.metric_value|floatformat:0 }} {{ metric|title }}</p>
                            <div class="h-36 mt-2 w-full bg-[#4a4a4a] pixel-border-light border-yellow-400 flex items-center justify-center">
                                <p class="font-pixel text-5xl text-yellow-300">1</p>
                            </div>
                        </div>
                    {% elif user.rank == 3 %}
                        <div class="w-1/3 flex flex-col items-center">
                            <img src="{% if user.avatar %}{{ user.avatar.url }}{% else %}https://placehold.co/64x64/222/bbbbbb?text={{ user.name.0|upper }}{% endif %}" alt="{{ user.name }} avatar" class="w-16 h-16 pixel-border mb-2" style="image-rendering: pixelated;">
                            <p class="font-pixel text-sm text-amber-500">{{ user.name }}</p>
                            <p class="text-xs text-yellow-400">{{ user.metric_value|floatformat:0 }} {{ metric|title }}</p>
                            <div class="h-20 mt-2 w-full bg-[#2a2a2a] pixel-border-light border-amber-600 flex items-center justify-center">
                                <p class="font-pixel text-4xl text-amber-500">3</p>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>
    </div>
</div>

{% if list_users %}
<div class="mt-6">
    <h4 class="font-pixel text-md text-center text-blue-400 mb-3">Rankings</h4>
    <div class="pixel-border bg-[#2a2a2a] p-2 space-y-2">
        {% for user in list_users %}
        <div class="flex items-center justify-between bg-[#1c1c1c] p-2">
            <span class="font-pixel text-sm text-gray-400 w-8">{{ user.rank }}</span>
            <p class="font-pixel text-sm text-white ml-3 flex-grow">{{ user.name }}</p>
            <p class="font-pixel text-sm text-yellow-400">{{ user.metric_value|floatformat:0 }}</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}